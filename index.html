<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>AI 调试</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; max-width: 800px; margin: 40px auto; padding: 0 16px; }
    textarea { width: 100%; height: 140px; }
    button { padding: 10px 16px; margin-top: 8px; }
    .out { white-space: pre-wrap; background: #f6f8fa; padding: 12px; border-radius: 8px; margin-top: 16px; }
  </style>
</head>
<body>
  <h1>简单问答调试</h1>
  <textarea id="q" placeholder="请输入你的问题..."></textarea><br/>
  <button id="go">发送</button>
  <div id="out" class="out"></div>

<script>
const API_KEY = "sk-30mPLxMC1sIGF8B-X7WBTg"; // 
const API_URL = "https://inference-api.nousresearch.com/v1/chat/completions";
const MODEL = "DeepHermes-3-Mistral-24B-Preview";

document.getElementById("go").onclick = async () => {
  const q = document.getElementById("q").value.trim();
  if (!q) return alert("请输入问题");
  document.getElementById("out").textContent = "请求中...";

  try {
    const resp = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${API_KEY}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: MODEL,
        messages: [
          { role: "system", content: "You are a helpful assistant. Answer clearly and concisely." },
          { role: "user", content: q }
        ],
        max_tokens: 256
      })
    });

    const data = await resp.json();
    let answer = data?.choices?.[0]?.message?.content || "[空响应]";
    answer = answer.replace(/<think>[\s\S]*?<\/think>/g, "").trim(); // 去掉 think
    document.getElementById("out").textContent = answer;
  } catch (e) {
    document.getElementById("out").textContent = "请求失败: " + e;
  }
};
</script>
</body>
</html>
